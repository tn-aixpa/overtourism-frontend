<div class="p-3 border rounded">
  <h6 class="mb-3">{{ "plot.widget.title" | translate }}</h6>

  <div class="bd-example-tabs">
    <div class="row">
      <!-- Tab List -->
      <div class="col-4 col-md-3">
        <div class="nav nav-tabs nav-tabs-vertical nav-tabs-vertical-background" role="tablist"
          aria-orientation="vertical">
          <a *ngFor="let group of objectKeys(widgets)" class="nav-link" [class.active]="activeTab === group"
            (click)="activeTab = group" href="javascript:void(0)" role="tab">
            {{ group }}
          </a>
        </div>
      </div>

      <!-- Tab Content -->
      <div class="col-8 col-md-9">
        <div class="tab-content">
          <div *ngFor="let group of objectKeys(widgets)" class="tab-pane p-3 fade" [class.show]="activeTab === group"
            [class.active]="activeTab === group" [class.fade]="true">
            <div class="row">
              <div *ngFor="let widget of widgets[group]" class="col-12 col-md-6 mb-4">
                <div *ngIf="widget.editable">
                  <div class="p-2  rounded h-100">
                    <label class="form-label d-block" [itTooltip]="!isEditable(widget) ? 'Modifica non disponibile per questo indice' :  widget.description ">
                      {{ widget.index_name }}
                    </label>

                    <!-- Se ha una scala -->
                    <ng-container *ngIf="widget.index_category !== '%' && widget.scale">
                      <div class="custom-slider" [ngClass]="{ 'disabled-slider': !isEditable(widget),'disabled-slider-wrapper': !isEditable(widget) } "
                        [itTooltip]="!isEditable(widget) ? 'Modifica non disponibile per questo indice' : undefined" >
                        <!-- [itTooltip]="!isEditable(widget) ? 'Modifica non disponibile per questo indice' : undefined"> -->

                        <ngx-slider [(value)]="widget.vMin!" [(highValue)]="widget.vMax!" [options]="{
                      floor: widget.min,
                      ceil: widget.max,
                      step: widget.step || 1
                    }" (userChangeEnd)="onWidgetChange()"></ngx-slider>
                      </div>
                    </ng-container>

                    <!-- Default: it-range -->
                    <ng-container *ngIf="!widget.scale">
                      <div
                        class="position-relative"
                        [ngClass]="{ 'disabled-slider-wrapper': !isEditable(widget) }"
                      >
                        <it-range
                          [min]="widget.min"
                          [max]="widget.max"
                          [step]="widget.step"
                          [(ngModel)]="widget.v"
                          leftColor="var(--bs-primary)"
                          rightColor="hsl(210, 100%, 70%)"
                          [label]="''"
                          (ngModelChange)="onWidgetChange()"
                          [itTooltip]="!isEditable(widget) ? 'Modifica non disponibile per questo indice' : undefined"

                        ></it-range>
                      </div>
                      <div class="small text-end text-muted">{{ widget.v }}</div>
                    </ng-container>
                    

                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- </div> -->